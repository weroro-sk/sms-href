(()=>{"use strict";const t=t=>"object"==typeof t&&null!==t,e=(n,s)=>{if(t(n)&&t(s))for(let o in s){const r=Reflect.get(s,o);t(r)?e(Reflect.get(n,o),r):Reflect.set(n,o,r)}},n="sms:",s=/^sms:/i,o="body=",r=/.body=/i;const i=new class{constructor(t){this.t={allow:{mobile:!0,tablet:!0,facebook:!0},separator:null,encode:!0},this.o=null,e(this.t,t),this.o=this.i()}fixAll(t=document){return new Promise(((e,o)=>{if(!this.o)return o(501);const r=t?.querySelectorAll(`a[href^="${n}"]`);if(!r?.length)return o(404);r.forEach((async t=>{const e=t.href.replace(s,"")?.trim();e&&(t.href=await this.fixValue(e,this.t.encode))})),e(200)}))}async fixValue(t,e){if("string"!=typeof this.o||!r.test(t))return t;"boolean"!=typeof e&&(e=this.t.encode),e&&(t=this.u(t));return(s.test(t)?"":n)+t?.replace(/&amp;/gi,"&")?.replace(r,this.o+o)}async create(t,e){const n=t?.phone?.toString().trim(),s=t?.message?.trim();if(!n&&!s)throw new TypeError("Phone number or message must be provided.");let r="";return n&&(r+=n),s&&(r+="?"+o+s),this.fixValue(r,e)}l(t){const e=t.match(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i)?.[1]?.replace("undefined","3_2").replace("_",".").replace("_","");if(!e||isNaN(+e))return-1;const n=parseInt(e),s=/ipad/i.test(t);return this.h(n,s)}p(t){if(!/android/i.test(t))return-1;const e=!/mobile/i.test(t);return this.h(1,e)}m(t){return/fba[nv]/gi.test(t)?1:-1}u(t){if(t.search(o)<5)return t;const e=t.split(o);return e.shift()+o+encodeURIComponent(decodeURIComponent(e.join(o)))}h(t,e){const n=this.t.allow;return n.mobile&&!n.tablet?e?-1:t:n.tablet&&!n.mobile?e?t:-1:t}i(){const t=this.t;if(t.separator?.trim())return t.separator;const e=navigator.userAgent;if(!t.allow?.facebook&&this.m(e)>0)return null;if(this.p(e)>0)return"?";const n=this.l(e);return n>0?n<=7?";":"&":null}};i.fixAll().then((t=>{const e=document.querySelector(".info");200===t&&(e.classList.add("bg-success"),e.textContent="All sms: href values in anchors on this webpage was updated")})).catch((t=>{const e=document.querySelector(".info");404===t?(e.classList.add("bg-warning"),e.textContent="Anchors with sms: href value doesn't exist"):501===t&&(e.classList.add("bg-danger"),e.textContent="Current platform doesn't support sms: href protocol")}));document.querySelector(".create").addEventListener("submit",(t=>{c(t,(async(t,e)=>{i.create({phone:t.phone.value,message:t.message.value},t["encode-create"].checked).then((e=>{t.output.value=e})).catch((t=>{e.textContent=t.message}))}))}));function c(t,e){t.preventDefault();const n=t.srcElement,s=function(t){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=s.id;o&&(e[o]=s)}return e}(n),o=n.querySelector(".text-danger");o.textContent="",e?.(s,o)}document.querySelector(".update").addEventListener("submit",(t=>{c(t,(async(t,e)=>{t.fixed.value=await i.fixValue(t["sms-text"].value,t["encode-update"].checked)}))}))})();
//# sourceMappingURL=demo.js.map