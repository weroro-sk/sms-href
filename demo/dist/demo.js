(()=>{"use strict";const e=navigator.userAgent,t=()=>{let t;return/CPU like.*AppleWebKit.*Mobile/i.test(e)?-1:isNaN(t=+e.match(/CPU.*OS ([0-9]{1,5})/i)?.[1])?0:t},s=()=>{let t,s=e.match(/(Android) ([0-9]{1,5})?/i);return s?.[1]?isNaN(t=+s?.[2])?-1:t:0},n=e=>new Map([[1,"This function is not available in Node.js environment"],[2,"Anchors with sms: href value doesn't exist"],[3,"SMS href values in anchors on this webpage was updated"],[4,"Separator is not defined or current platform doesn't support sms: href protocol."]]).get(e)||"Unknown message",r=(e,t,s="")=>e?.replace(t,s);class a{t;i;o;l;constructor(e){this.t=this.u(e?.h,e?.g);const t=e=>e;this.i=e?.m||t,this.o=e?.p||t,this.l=e?._||t}async v(e,t){let s,n,r,a=[];if("undefined"==typeof window&&!t)return{code:1};if(!this.t)return{code:4};if(!(n=(e||document).querySelectorAll('a[href^="sms:"]')).length)return{code:2};for(s of n)(r=await this.A(s.href))?s.href=r:a.push(s);return{code:3,errors:a}}async A(e){const t=this.k(this.l(r(e,/&amp;/gi,"&"),1));return t?await this.M(t.N,t.S):t}async M(e,t){let s="";return(e=r(e,/[^0-9+A-Z]+/gi))&&(s+=this.i(e)),this.t&&(t=this.o(t?.trim()))&&(s+=this.t+"body="+this.l(t)),s?"sms:"+s:null}k(e){let[t,s,n]=e.match(/^sms:\/*([0-9+A-Z]+)?(?:[^0-9A-Z]body=(.+)?)?$/i)||[];return s=r(s,/\s+/g),n=r(n,/\s+/g," ")?.trim(),s||n?{N:s,S:n}:null}u(e,n){let r;return n?.includes(!0)?null:e||(s()?"?":(r=t())?r<8?";":"&":null)}}(async()=>{const e=new a,t=(e,t)=>{e.preventDefault();const n=e.srcElement,r=s(n),a=n.querySelector(".text-danger");a.textContent="",t?.(r,a)},s=e=>{const t={};for(let s=0;s<e.length;s++){const n=e[s],r=n.id;r&&(t[r]=n)}return t},r=await e.v(),i=document.querySelector(".info");switch(console.log(r),r.code){case 3:i.classList.add("bg-success");let e=n(3);const t=r.errors;t.length&&(e+="\n\n"+t.map((e=>[e.href,e.innerHTML])).join("\n")),i.textContent=e,console.log(r.errors);break;case 2:i.classList.add("bg-warning"),i.textContent=n(2);break;case 1:i.classList.add("bg-danger"),i.textContent=n(1);break;case 4:i.classList.add("bg-danger"),i.textContent=n(4)}document.querySelector(".create").addEventListener("submit",(s=>{t(s,(async(t,s)=>{const n=await e.M(t.phone.value,t.message.value);n?t.output.value=n:s.textContent="sms value error"}))}));document.querySelector(".update").addEventListener("submit",(s=>{t(s,(async(t,s)=>{const n=await e.A(t["sms-text"].value);n?t.fixed.value=n:s.textContent="Fixed value error"}))}))})()})();
//# sourceMappingURL=demo.js.map