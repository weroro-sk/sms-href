(()=>{"use strict";const t="sms:",e=/^sms:/i,n="body=",s=/.body=/i,o=t=>null!==typeof t&&"object"==typeof t,r=(t,e)=>{if(o(t)&&o(e))for(const n in e){const s=e[n];o(s)?r(t[n],s):t[n]=s}};const i=new class{constructor(t){this.t={allow:{mobile:!0,tablet:!0,facebook:!0},separator:null,encode:!0},this.o=null,r(this.t,t),this.o=this.i()}fixAll(n=document){return new Promise(((s,o)=>{if(!this.o)return o(501);const r=n?.querySelectorAll(`a[href^="${t}"]`);if(!r?.length)return o(404);r.forEach((async t=>{const n=t.href.replace(e,"")?.trim();n&&(t.href=await this.fixValue(n,this.t.encode))})),s(200)}))}async fixValue(o,r){if("string"!=typeof this.o||!s.test(o))return o;"boolean"!=typeof r&&(r=this.t.encode),r&&(o=this.u(o));return(e.test(o)?"":t)+o?.replace(/&amp;/gi,"&").replace(s,this.o+n)}async create(t,e){const s=t?.phone?.toString().trim(),o=t?.message?.trim();if(!s&&!o)throw new TypeError("Phone number or message must be provided.");let r="";return s&&(r+=s),o&&(r+="?"+n+o),this.fixValue(r,e)}l(t){const e=t.match(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i)?.[1]?.replace("undefined","3_2").replace("_",".").replace("_","");if(!e||isNaN(+e))return-1;const n=parseInt(e),s=/ipad/i.test(t);return this.h(n,s)}p(t){if(!/android/i.test(t))return-1;const e=!/mobile/i.test(t);return this.h(1,e)}m(t){return/fba[nv]/gi.test(t)?1:-1}u(t){if(t.search(n)<n.length)return t;const e=t.split(n);return e.shift()+n+encodeURIComponent(decodeURIComponent(e.join(n)))}h(t,e){const n=this.t.allow;return n.mobile&&!n.tablet?e?-1:t:n.tablet&&!n.mobile?e?t:-1:t}i(){const t=this.t;if(t.separator?.trim())return t.separator;const e=navigator.userAgent;if(!t.allow?.facebook&&this.m(e)>0)return null;if(this.p(e)>0)return"?";const n=this.l(e);return n>0?n<=7?";":"&":null}};i.fixAll().then((t=>{const e=document.querySelector(".info");200===t&&(e.classList.add("bg-success"),e.textContent="All sms: href values in anchors on this webpage was updated")})).catch((t=>{const e=document.querySelector(".info");404===t?(e.classList.add("bg-warning"),e.textContent="Anchors with sms: href value doesn't exist"):501===t&&(e.classList.add("bg-danger"),e.textContent="Current platform doesn't support sms: href protocol")}));document.querySelector(".create").addEventListener("submit",(t=>{c(t,(async(t,e)=>{i.create({phone:t.phone.value,message:t.message.value},t["encode-create"].checked).then((e=>{t.output.value=e})).catch((t=>{e.textContent=t.message}))}))}));function c(t,e){t.preventDefault();const n=t.srcElement,s=function(t){const e={};for(let n=0;n<t.length;n++){const s=t[n],o=s.id;o&&(e[o]=s)}return e}(n),o=n.querySelector(".text-danger");o.textContent="",e?.(s,o)}document.querySelector(".update").addEventListener("submit",(t=>{c(t,(async(t,e)=>{t.fixed.value=await i.fixValue(t["sms-text"].value,t["encode-update"].checked)}))}))})();
//# sourceMappingURL=demo.js.map